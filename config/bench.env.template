# config/bench.env.template
# Copy to config/bench.env and edit.
# Used by: python scripts/run_and_publish.py --env-file config/bench.env
#
# Deterministic rule:
# - If you run WITHOUT --no-readme (publish), BENCHES MUST include:
#     prefill_decode cache_generate
# - If you want a debug run with only one bench, use --no-readme.

MODEL="Qwen/Qwen2.5-0.5B-Instruct"
DEVICE="mps"          # mps | cuda:0 | cpu
DTYPE="float16"       # float16 | float32
ATTN="sdpa"           # sdpa | eager

# Matrix knobs (space-separated)
PROMPT_LENS="1024 2048 4096"
NEW_TOKENS_LIST="64"
CACHE_IMPLS="dynamic"

RUNS="3"
WARMUP="1"
WARMUP_DECODE_TOKENS="64"   # only affects prefill_decode warmup

# Publish requires BOTH benches
BENCHES="prefill_decode cache_generate"

# README headline row (set 0 to auto-pick)
HEADLINE_PROMPT_LEN="4096"
HEADLINE_NEW_TOKENS="64"
HEADLINE_CACHE_IMPL="dynamic"

# Optional note stored into meta.txt
NOTES=""

# ---- Focused stall investigation preset (4096 only + dynamic vs static) ----
# Uncomment these 3 lines for the stall test:
# PROMPT_LENS="4096"
# NEW_TOKENS_LIST="64"
# CACHE_IMPLS="dynamic static"